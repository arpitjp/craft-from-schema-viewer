import type { Palette } from "./types";

/**
 * Default block ID â†’ RGB mapping. Covers ~100 common Minecraft blocks.
 * Used as fallback when schematics don't embed their own palette.
 */
const DEFAULT_PALETTE: Palette = {
  "minecraft:stone": [125, 125, 125],
  "minecraft:granite": [153, 114, 99],
  "minecraft:diorite": [188, 182, 179],
  "minecraft:andesite": [136, 136, 136],
  "minecraft:deepslate": [80, 80, 82],
  "minecraft:cobblestone": [127, 127, 127],
  "minecraft:stone_bricks": [122, 121, 122],
  "minecraft:blackstone": [42, 36, 41],
  "minecraft:oak_planks": [162, 130, 78],
  "minecraft:spruce_planks": [115, 85, 49],
  "minecraft:birch_planks": [196, 179, 123],
  "minecraft:dark_oak_planks": [66, 43, 20],
  "minecraft:oak_log": [109, 85, 50],
  "minecraft:spruce_log": [58, 37, 16],
  "minecraft:white_wool": [234, 236, 236],
  "minecraft:light_gray_wool": [142, 142, 135],
  "minecraft:gray_wool": [63, 68, 72],
  "minecraft:black_wool": [21, 21, 26],
  "minecraft:brown_wool": [114, 72, 41],
  "minecraft:red_wool": [161, 39, 35],
  "minecraft:orange_wool": [241, 118, 20],
  "minecraft:yellow_wool": [249, 198, 40],
  "minecraft:green_wool": [84, 109, 28],
  "minecraft:blue_wool": [53, 57, 157],
  "minecraft:cyan_wool": [21, 138, 145],
  "minecraft:purple_wool": [122, 42, 173],
  "minecraft:white_terracotta": [210, 178, 161],
  "minecraft:blue_terracotta": [74, 60, 91],
  "minecraft:cyan_terracotta": [86, 91, 91],
  "minecraft:brown_terracotta": [77, 51, 36],
  "minecraft:red_terracotta": [143, 61, 47],
  "minecraft:glass": [175, 213, 219],
  "minecraft:white_stained_glass": [255, 255, 255],
  "minecraft:blue_stained_glass": [51, 76, 178],
  "minecraft:iron_block": [220, 220, 220],
  "minecraft:gold_block": [249, 236, 79],
  "minecraft:copper_block": [192, 107, 79],
  "minecraft:quartz_block": [236, 230, 223],
  "minecraft:prismarine": [99, 156, 131],
  "minecraft:sandstone": [216, 203, 155],
  "minecraft:red_sandstone": [186, 99, 29],
  "minecraft:bricks": [150, 97, 83],
  "minecraft:bookshelf": [162, 130, 78],
  "minecraft:dirt": [134, 96, 67],
  "minecraft:grass_block": [95, 159, 53],
  "minecraft:sand": [219, 207, 163],
  "minecraft:snow_block": [250, 253, 253],
  "minecraft:obsidian": [15, 11, 25],
  "minecraft:glowstone": [171, 131, 84],
  "minecraft:sea_lantern": [172, 199, 190],
  "minecraft:purpur_block": [170, 126, 170],
  "minecraft:purpur_pillar": [172, 131, 172],
  "minecraft:purple_terracotta": [118, 70, 86],
  "minecraft:magenta_terracotta": [149, 88, 109],
  "minecraft:purple_concrete": [100, 32, 156],
  "minecraft:purple_concrete_powder": [131, 55, 177],
  "minecraft:magenta_wool": [189, 68, 179],
  "minecraft:magenta_concrete": [169, 48, 159],
  "minecraft:amethyst_block": [133, 97, 191],
  "minecraft:pink_terracotta": [162, 78, 79],
  "minecraft:pink_concrete": [214, 101, 143],
  "minecraft:light_blue_wool": [58, 175, 217],
  "minecraft:light_blue_terracotta": [113, 109, 138],
  "minecraft:light_blue_concrete": [36, 137, 199],
  "minecraft:blue_concrete": [45, 47, 143],
  "minecraft:blue_ice": [116, 167, 253],
  "minecraft:smooth_sandstone": [223, 214, 170],
  "minecraft:end_stone": [219, 223, 158],
  "minecraft:end_stone_bricks": [219, 222, 159],
  "minecraft:bone_block": [229, 225, 207],
  "minecraft:white_concrete": [207, 213, 214],
  "minecraft:white_concrete_powder": [226, 227, 228],
  "minecraft:smooth_quartz": [235, 229, 222],
  "minecraft:calcite": [224, 224, 220],
  "minecraft:birch_log": [216, 215, 210],
  "minecraft:light_gray_concrete": [125, 125, 115],
  "minecraft:gray_concrete": [55, 58, 62],
  "minecraft:cyan_concrete": [21, 119, 136],
  "minecraft:clay": [160, 166, 179],
  "minecraft:lapis_block": [38, 67, 138],
  "minecraft:warped_planks": [43, 105, 99],
  "minecraft:stripped_oak_log": [177, 144, 86],
  "minecraft:stripped_birch_log": [196, 176, 118],
  "minecraft:stripped_spruce_log": [115, 89, 52],
  "minecraft:mushroom_stem": [203, 196, 185],
  "minecraft:brown_mushroom_block": [149, 112, 81],
  "minecraft:red_mushroom_block": [200, 47, 45],
  "minecraft:packed_mud": [142, 106, 79],
  "minecraft:mud_bricks": [137, 104, 75],
  "minecraft:bedrock": [85, 85, 85],
  "minecraft:water": [63, 118, 228],
  "minecraft:lava": [207, 92, 15],
  "minecraft:gravel": [131, 127, 126],
  "minecraft:gold_ore": [143, 140, 125],
  "minecraft:iron_ore": [136, 130, 127],
  "minecraft:coal_ore": [105, 105, 105],
  "minecraft:oak_leaves": [59, 122, 20],
  "minecraft:mossy_cobblestone": [110, 118, 94],
  "minecraft:netherrack": [97, 38, 38],
  "minecraft:nether_bricks": [44, 22, 26],
  "minecraft:red_nether_bricks": [69, 7, 9],
  "minecraft:crimson_planks": [101, 48, 70],
  "minecraft:acacia_planks": [168, 90, 50],
  "minecraft:jungle_planks": [160, 115, 80],
  "minecraft:mangrove_planks": [118, 54, 48],
  "minecraft:cherry_planks": [226, 178, 172],
  "minecraft:bamboo_planks": [194, 175, 85],
  "minecraft:tuff": [108, 109, 102],
  "minecraft:polished_deepslate": [72, 72, 73],
  "minecraft:deepslate_bricks": [70, 70, 71],
  "minecraft:deepslate_tiles": [54, 54, 55],
  "minecraft:mossy_stone_bricks": [115, 121, 105],
  "minecraft:cracked_stone_bricks": [118, 117, 118],
  "minecraft:polished_granite": [154, 107, 89],
  "minecraft:polished_diorite": [192, 193, 194],
  "minecraft:polished_andesite": [132, 135, 133],
  "minecraft:terracotta": [152, 94, 68],
  "minecraft:red_concrete": [142, 33, 33],
  "minecraft:orange_concrete": [224, 97, 1],
  "minecraft:yellow_concrete": [241, 175, 21],
  "minecraft:lime_concrete": [94, 169, 25],
  "minecraft:green_concrete": [73, 91, 36],
  "minecraft:black_concrete": [8, 10, 15],
  "minecraft:brown_concrete": [96, 60, 32],
  "minecraft:lime_wool": [112, 185, 26],
  "minecraft:pink_wool": [238, 141, 172],
  "minecraft:light_gray_terracotta": [135, 107, 98],
  "minecraft:gray_terracotta": [57, 42, 36],
  "minecraft:orange_terracotta": [162, 84, 38],
  "minecraft:yellow_terracotta": [186, 133, 35],
  "minecraft:lime_terracotta": [104, 118, 53],
  "minecraft:green_terracotta": [76, 83, 42],
  "minecraft:black_terracotta": [37, 23, 16],
};

const FALLBACK_COLOR: [number, number, number] = [128, 128, 128];

export function lookupColor(blockId: string): [number, number, number] {
  return DEFAULT_PALETTE[blockId] ?? FALLBACK_COLOR;
}

export function buildPalette(blockIds: Iterable<string>): Palette {
  const pal: Palette = {};
  for (const id of blockIds) {
    pal[id] = lookupColor(id);
  }
  return pal;
}
