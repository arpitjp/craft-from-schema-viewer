<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>@craftfrom/schema-viewer — Demo</title>
<meta name="description" content="Minecraft schematic viewer. Load, display, and compare .litematic, .schematic, .schem files in 3D. Open-source npm package.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #080a0b;
  --surface: #111315;
  --border: #1e2124;
  --text: #c8cdd0;
  --text2: #6a7075;
  --text3: #3e4347;
  --white: #e4e8eb;
  --green: #4ade80;
  --green-dim: rgba(74,222,128,.1);
  --mono: 'JetBrains Mono', monospace;
  --font: 'Inter', system-ui, sans-serif;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{background:var(--bg);color:var(--text);font-family:var(--font);-webkit-font-smoothing:antialiased;}
::selection{background:rgba(74,222,128,.25);color:#fff;}

.header {
  padding:16px 24px;
  display:flex;align-items:center;justify-content:space-between;
  border-bottom:1px solid var(--border);
  background:var(--surface);
  position:relative;z-index:10;
}
.header-left{display:flex;align-items:center;gap:12px;}
.header h1{font-family:var(--mono);font-size:15px;font-weight:600;color:var(--white);letter-spacing:-.3px;}
.header h1 em{font-style:normal;color:var(--text3);font-weight:400;}
.header .badge{
  font-family:var(--mono);font-size:9px;
  padding:2px 7px;border-radius:10px;
  background:var(--green-dim);color:var(--green);
  letter-spacing:.5px;text-transform:uppercase;
}
.header-right{display:flex;align-items:center;gap:10px;}
.header-link{
  font-family:var(--mono);font-size:10px;
  color:var(--text2);text-decoration:none;
  padding:5px 12px;border-radius:5px;
  border:1px solid var(--border);
  transition:all .15s;
}
.header-link:hover{color:var(--green);border-color:var(--green);}

.info-strip{
  padding:10px 24px;
  font-size:12px;color:var(--text2);
  border-bottom:1px solid var(--border);
  background:var(--bg);
  display:flex;align-items:center;gap:20px;flex-wrap:wrap;
}
.info-strip code{
  font-family:var(--mono);font-size:11px;
  background:var(--surface);padding:3px 8px;
  border:1px solid var(--border);border-radius:4px;
  color:var(--green);cursor:pointer;
  transition:border-color .15s;
}
.info-strip code:hover{border-color:var(--green);}
.info-strip .sep{color:var(--text3);}
.info-strip .hint{color:var(--text3);font-size:11px;}

#viewer-container{
  width:100%;height:calc(100vh - 90px);
  position:relative;
}

.toast{
  position:fixed;bottom:20px;left:50%;transform:translateX(-50%);
  font-family:var(--mono);font-size:11px;
  background:var(--surface);border:1px solid var(--border);
  color:var(--text2);padding:8px 16px;border-radius:6px;
  opacity:0;transition:opacity .3s;z-index:100;pointer-events:none;
}
.toast.visible{opacity:1;}

@media(max-width:640px){
  .header{padding:12px 16px;}
  .info-strip{padding:8px 16px;font-size:11px;}
  .header h1{font-size:13px;}
  #viewer-container{height:calc(100vh - 80px);}
}
</style>
</head>
<body>

<div class="header">
  <div class="header-left">
    <h1>@craftfrom<em>/schema-viewer</em></h1>
    <span class="badge">demo</span>
  </div>
  <div class="header-right">
    <a class="header-link" href="https://github.com/arpitjp/craft-from-schema-viewer" target="_blank">GitHub</a>
    <a class="header-link" href="https://www.npmjs.com/package/@craftfrom/schema-viewer" target="_blank">npm</a>
  </div>
</div>

<div class="info-strip">
  <code id="install-cmd" title="Click to copy">npm i @craftfrom/schema-viewer three</code>
  <span class="sep">|</span>
  <span class="hint">Drop .json, .schematic, .schem, or .litematic files to load your own schematics, or explore the samples below</span>
</div>

<div id="viewer-container"></div>
<div class="toast" id="toast"></div>

<script type="importmap">
{
  "imports": {
    "three": "https://cdn.jsdelivr.net/npm/three@0.170.0/build/three.module.js",
    "three/examples/jsm/": "https://cdn.jsdelivr.net/npm/three@0.170.0/examples/jsm/"
  }
}
</script>

<script type="module">
import { SchemaViewer } from "./dist/index.js";

/* ═══════════════════════════════════════════════════════
   Sample schematics — procedurally generated
   ═══════════════════════════════════════════════════════ */

function generateHouse() {
  const blocks = [], W=12, D=10, wallH=6, roofH=5;
  const P = {
    "minecraft:oak_planks":[162,130,78],
    "minecraft:spruce_planks":[115,85,49],
    "minecraft:stone_bricks":[122,121,122],
    "minecraft:oak_log":[109,85,50],
    "minecraft:glass":[175,213,219],
    "minecraft:cobblestone":[127,127,127],
    "minecraft:dark_oak_planks":[66,43,20],
    "minecraft:spruce_log":[58,37,16],
  };
  for(let x=0;x<W;x++)for(let z=0;z<D;z++) blocks.push([x,0,z,"minecraft:cobblestone"]);
  for(let y=1;y<=wallH;y++){
    for(let x=0;x<W;x++){
      for(let z=0;z<D;z++){
        const edge=x===0||x===W-1||z===0||z===D-1;
        const corner=(x===0||x===W-1)&&(z===0||z===D-1);
        if(corner) blocks.push([x,y,z,"minecraft:oak_log"]);
        else if(edge){
          if(y>=3&&y<=4&&(x===Math.floor(W/2)||x===Math.floor(W/2)-1)&&z===0) blocks.push([x,y,z,"minecraft:glass"]);
          else if(y>=3&&y<=4&&(z===Math.floor(D/2)||z===Math.floor(D/2)-1)&&(x===0||x===W-1)) blocks.push([x,y,z,"minecraft:glass"]);
          else blocks.push([x,y,z,"minecraft:oak_planks"]);
        }
      }
    }
  }
  for(let i=0;i<=roofH;i++){
    for(let z=-1;z<=D;z++){
      if(z>=0&&z<D){
        if(i<W/2) blocks.push([i,wallH+1+i,z,"minecraft:spruce_planks"]);
        if(W-1-i>i) blocks.push([W-1-i,wallH+1+i,z,"minecraft:spruce_planks"]);
      }
    }
    if(i<W/2)for(let z=-1;z<=D;z++)blocks.push([i,wallH+i,z,"minecraft:dark_oak_planks"]);
    if(W-1-i>i)for(let z=-1;z<=D;z++)blocks.push([W-1-i,wallH+i,z,"minecraft:dark_oak_planks"]);
  }
  return { blocks, palette: P };
}

function generateTower() {
  const blocks = [], R=4, H=20;
  const P = {
    "minecraft:stone_bricks":[122,121,122],
    "minecraft:cobblestone":[127,127,127],
    "minecraft:deepslate":[80,80,82],
    "minecraft:spruce_planks":[115,85,49],
    "minecraft:oak_log":[109,85,50],
    "minecraft:stone":[125,125,125],
  };
  for(let y=0;y<H;y++){
    const r=y<3?R+1:y>H-3?R-1:R;
    for(let x=-r;x<=r;x++){
      for(let z=-r;z<=r;z++){
        if(x*x+z*z>r*r) continue;
        const dist2=x*x+z*z;
        const shell=dist2>(r-1)*(r-1);
        if(y===0) blocks.push([x+R+1,y,z+R+1,"minecraft:deepslate"]);
        else if(shell) blocks.push([x+R+1,y,z+R+1,y<4?"minecraft:cobblestone":"minecraft:stone_bricks"]);
        else if(y===H-1) blocks.push([x+R+1,y,z+R+1,"minecraft:spruce_planks"]);
      }
    }
  }
  for(let i=0;i<3;i++){
    const cr=R+2-i;
    for(let x=-cr;x<=cr;x++)for(let z=-cr;z<=cr;z++){
      if(x*x+z*z<=cr*cr&&x*x+z*z>(cr-1)*(cr-1))
        blocks.push([x+R+1,H+i,z+R+1,"minecraft:stone_bricks"]);
    }
  }
  return { blocks, palette: P };
}

function generateBridge() {
  const blocks = [], L=20, W=5;
  const P = {
    "minecraft:stone_bricks":[122,121,122],
    "minecraft:oak_planks":[162,130,78],
    "minecraft:oak_log":[109,85,50],
    "minecraft:cobblestone":[127,127,127],
    "minecraft:spruce_log":[58,37,16],
  };
  const archH=4;
  for(let x=0;x<L;x++){
    for(let z=0;z<W;z++){
      blocks.push([x,archH,z,"minecraft:oak_planks"]);
      if(z===0||z===W-1) blocks.push([x,archH+1,z,"minecraft:cobblestone"]);
    }
    if(x===0||x===L-1||x===Math.floor(L/2)){
      for(let y=0;y<archH;y++)for(let z=0;z<W;z++){
        if(z===0||z===W-1) blocks.push([x,y,z,"minecraft:stone_bricks"]);
      }
    }
    if(x%4===0){
      for(let z of[0,W-1]) blocks.push([x,archH+2,z,"minecraft:oak_log"]);
    }
  }
  for(let x=1;x<Math.floor(L/2);x++){
    const h=Math.max(0, archH-1-Math.floor(Math.sqrt(Math.abs(x-Math.floor(L/4))*1.5)));
    for(let z=1;z<W-1;z++){
      if(h<archH-1) blocks.push([x,h,z,"minecraft:cobblestone"]);
    }
  }
  return { blocks, palette: P };
}

/* ── Boot ── */
const viewer = new SchemaViewer({
  container: document.getElementById("viewer-container"),
});

viewer.addSchematic("Cottage", generateHouse());
viewer.addSchematic("Watchtower", generateTower());
viewer.addSchematic("Stone Bridge", generateBridge());

/* Copy install command */
const toast = document.getElementById("toast");
document.getElementById("install-cmd").addEventListener("click", async () => {
  await navigator.clipboard.writeText("npm install @craftfrom/schema-viewer three");
  toast.textContent = "Copied to clipboard";
  toast.classList.add("visible");
  setTimeout(() => toast.classList.remove("visible"), 1500);
});
</script>
</body>
</html>
